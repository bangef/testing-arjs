<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>A-Frame - LBAR</title>
		<script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
		<script
			type="text/javascript"
			src="https://raw.githack.com/AR-js-org/AR.js/master/three.js/build/ar-threex-location-only.js"
		></script>
		<script
			type="text/javascript"
			src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"
		></script>
		<style>
			* {
				padding: 0;
				margin: 0;
				box-sizing: border-box;
			}
			#scene {
				width: 100%;
				height: 100%;
				overflow: hidden;
			}
		</style>
	</head>
	<body>
		<a-scene
			id="scene"
			vr-mode-ui="enabled: false"
			arjs="sourceType: webcam; videoTexture: true; debugUIEnabled: false;"
			renderer="antialias: true; alpha: true"
		>
			<a-camera gps-camera="gps-distance: 0" rotation-reader></a-camera>
			<a-assets>
				<a-asset-item
					id="bdsTuguKujang"
					src="./src/models/bds-tugu-kujang.glb"
				></a-asset-item>
				<a-asset-item
					id="mallBotaniSquare"
					src="./src/models/mall-botani-square.glb"
				></a-asset-item>
				<a-asset-item
					id="tuguKujang"
					src="./src/models/tugu-kujang.glb"
				></a-asset-item>
			</a-assets>
			<a-gltf-model
				src="#bdsTuguKujang"
				scale="1 1 1"
				rotation="0 0 0"
				look-at="[gps-camera]"
				gps-entity-place="latitude:-6.601471714351664;longitude:106.8048409815005"
				animation="property: rotation; to: 0 360 0; dur: 50000; easing: linear; loop: true"
			></a-gltf-model>
			<a-gltf-model
				src="#mallBotaniSquare"
				scale="1 1 1"
				rotation="0 0 0"
				gps-entity-place="latitude:-6.601393740337289;longitude:106.8068655154671"
				animation="property: rotation; to: 0 360 0; dur: 50000; easing: linear; loop: true"
			></a-gltf-model>
			<a-gltf-model
				src="#tuguKujang"
				scale="1 1 1"
				rotation="0 0 0"
				gps-entity-place="latitude: -6.601180586224578;longitude:106.80509525758612"
				animation="property: rotation; to: 0 360 0; dur: 50000; easing: linear; loop: true"
			></a-gltf-model>
		</a-scene>
		<script>
			window.onload = () => {
				const modelsAsset = [
					{
						path: "./src/models/bds-tugu-kujang.glb",
						coords: {
							latitude: -6.601471714351664,
							longitude: 106.8048409815005,
						},
					},
					{
						path: "./src/models/mall-botani-square.glb",
						coords: {
							latitude: -6.601393740337289,
							longitude: 106.8068655154671,
						},
					},
					{
						path: "./src/models/tugu-kujang.glb",
						coords: {
							latitude: -6.601180586224578,
							longitude: 106.80509525758612,
						},
					},
				];

				// renderPlaces(modelsAsset);
			};

			const renderPlaces = (models) => {
				const scene = document.querySelector("a-scene");
				models.forEach((model) => {
					let elementModel = document.createElement("a-entity");
					elementModel.setAttribute("src", model.path);
					elementModel.setAttribute(
						"gps-entity-place",
						`latitude: ${model.coords.latitude}; longitude: ${model.coords.longitude};`
					);
					elementModel.setAttribute("scale", "1 1 1");
					elementModel.setAttribute("rotation", "0 0 0");
					elementModel.setAttribute(
						"animation",
						"property: rotation; to: 0 360 0; dur: 50000; easing: linear; loop: true"
					);
					scene.appendChild(elementModel);
				});
			};
		</script>
	</body>
</html>
